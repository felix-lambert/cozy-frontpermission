{"version":3,"sources":["app/app.module.js","app/scripts/bookmarks/Home.Ctrl.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;CCxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"scripts/app.js","sourcesContent":["angular.module('Bookmarks', [\n  'ngResource',\n  'ngRoute'\n]).config(appConfig);\n\nvar routeObject = {\n  '/': {\n    templateUrl: 'partials/home.html',\n    controller: 'HomeAngCtrl',\n    controllerAs: 'home'\n  }\n};\n\nappConfig.$inject = ['$httpProvider', '$routeProvider'];\n\nfunction appConfig($httpProvider, $routeProvider) {\n  for (var path in routeObject) {\n    console.log(path);\n\n    $routeProvider.when(path, routeObject[path]);\n  }\n  $routeProvider.otherwise({\n    redirectTo: '/'\n  });\n  console.log 'app config'\n  window.parent.postMessage({action: 'getToken'}, '*');\n\n    window.addEventListener(\"message\", function(event) {\n      \n    intent = event.data;\n    if (intent.token) {\n      location = window.location;\n      url = location.protocol + \"//\" + location.host + \"/ds-api/request/contact/all/\";\n      xhr = new XMLHttpRequest();\n      xhr.open('POST', url, true);\n      xhr.onload = function() {\n          console.log(xhr.response);\n          $rootScope.contacts = xhr.response;\n          $rootScope.$apply();\n      }\n      xhr.onerror = function(e) {\n          err = \"Request failed : #{e.target.status}\";\n          console.log(err);\n          }\n          xhr.setRequestHeader('Content-Type', 'application/json');\n          token = btoa(\"frontpermission:\" + intent.token);\n          authorization = \"Basic \" + token;\n          xhr.setRequestHeader(\"Authorization\", authorization);\n          xhr.send();\n      } else {\n          console.log(\"Weird intent, cannot handle it\", intent);\n          window.onerror(\"Error handling intent: \" + intent, \"MainRouter.initialize\", null, null,\n              new Error()\n          );\n      }\n    }, true);\n}","angular.module('Bookmarks').controller('HomeAngCtrl', HomeAngCtrl);\n\nHomeAngCtrl.$inject = ['$scope', '$injector', '$rootScope'];\n\nfunction HomeAngCtrl($scope, $injector, $rootScope) {\n\n\tvar vm        = this;\n\tvm.getContact = getContact;\n\n  \tfunction getContact() {\n    \tconsole.log('_____________Get contact_____________');\n        window.parent.postMessage({action: 'getToken'}, '*');\n\nwindow.addEventListener(\"message\", function(event) {\n\t\nintent = event.data;\nif (intent.token) {\n  location = window.location;\n  url = location.protocol + \"//\" + location.host + \"/ds-api/request/contact/all/\";\n  xhr = new XMLHttpRequest();\n  xhr.open('POST', url, true);\n  xhr.onload = function() {\n      console.log(xhr.response);\n      $rootScope.contacts = xhr.response;\n      $rootScope.$apply();\n  }\n  xhr.onerror = function(e) {\n      err = \"Request failed : #{e.target.status}\";\n      console.log(err);\n      }\n      xhr.setRequestHeader('Content-Type', 'application/json');\n      token = btoa(\"frontpermission:\" + intent.token);\n      authorization = \"Basic \" + token;\n      xhr.setRequestHeader(\"Authorization\", authorization);\n      xhr.send();\n  } else {\n      console.log(\"Weird intent, cannot handle it\", intent);\n      window.onerror(\"Error handling intent: \" + intent, \"MainRouter.initialize\", null, null,\n          new Error()\n      );\n  }\n}, true);\n    }\n}"]}